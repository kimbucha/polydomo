(()=>{var e,t={234:(e,t,r)=>{"use strict";var n=r(540),a=r(338),o=r(942),i=r.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=e.timeLeft,r=e.isBreak,a=e.isRunning,o=e.onComplete,c=e.settings,u=e.currentTask,l=s((0,n.useState)(!1),2),f=l[0],m=l[1],p=s((0,n.useState)(!1),2),d=p[0],y=p[1];(0,n.useEffect)((function(){if(a||0===t){y(!0);var e=setTimeout((function(){return y(!1)}),300);return function(){return clearTimeout(e)}}}),[a,t]);var b=t/(r?c.breakDuration:c.focusDuration),v=i()("timer-container",{break:r,focus:!r,running:a,completed:0===t,transitioning:d});return n.createElement("div",{className:v},n.createElement("div",{className:"timer-type"},n.createElement("span",{className:"timer-label"},r?"Break Time":"Focus Time"),u&&n.createElement("span",{className:"current-task-label"},u)),n.createElement("div",{className:"timer-display"},function(e){if("number"!=typeof e||isNaN(e))return"".concat(r?(null==c?void 0:c.breakDuration)||5:(null==c?void 0:c.focusDuration)||25,":00");var t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)}(t)),n.createElement("div",{className:"progress-circle"},n.createElement("svg",{viewBox:"0 0 100 100"},n.createElement("circle",{className:"progress-background",cx:"50",cy:"50",r:"45"}),n.createElement("circle",{className:"progress-indicator",cx:"50",cy:"50",r:"45",style:{strokeDasharray:"".concat(2*Math.PI*45),strokeDashoffset:"".concat(2*(1-b)*Math.PI*45)}}))),f&&n.createElement("div",{className:"completion-prompt"},n.createElement("h3",null,"Focus Session Complete!"),n.createElement("p",null,"Great work! Time for a break?"),n.createElement("div",{className:"prompt-actions"},n.createElement("button",{className:"primary-button",onClick:function(){m(!1),o(!0)}},"Start Break"),n.createElement("button",{className:"secondary-button",onClick:function(){m(!1),o(!1)}},"Skip Break"))))};var l=function(e){var t=e.taskInput,r=e.setTaskInput,a=e.handleStartTimer,o=e.isVisible,s=e.isBreak,c=e.handleKeyPress,u=i()("task-input-container",{visible:o,break:s});return o?n.createElement("div",{className:u},n.createElement("label",{htmlFor:"taskInput",className:"task-label"},"What are you focusing on?"),n.createElement("input",{id:"taskInput",type:"text",className:"task-input",value:t,onChange:function(e){return r(e.target.value)},onKeyPress:c,placeholder:"Enter your focus task...",autoFocus:!0}),n.createElement("button",{className:"primary-button",onClick:a,disabled:!t.trim()},"Start Focus Session")):null};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(){var e=b((0,n.useState)({focusDuration:25,breakDuration:5,notifications:!0}),2),t=e[0],r=(e[1],b((0,n.useState)({timeLeft:t.focusDuration,isBreak:!1,isRunning:!1,currentTask:"",isCompleted:!1}),2)),a=r[0],o=r[1];(0,n.useEffect)((function(){a.isRunning||o((function(e){return d(d({},e),{},{timeLeft:e.isBreak?t.breakDuration:t.focusDuration})}))}),[t.focusDuration,t.breakDuration]);var i=b((0,n.useState)(""),2),s=i[0],c=i[1],f=b((0,n.useState)(""),2),p=f[0],y=f[1],v=b((0,n.useState)([]),2),g=v[0],h=v[1],k=b((0,n.useState)(!1),2),S=(k[0],k[1]),E=b((0,n.useState)(null),2),O=E[0],T=E[1];(0,n.useEffect)((function(){var e;console.log("Setting up port connection...");try{e=chrome.runtime.connect({name:"popup"}),T(e);var t=function(e){console.log("Received message:",e),"STATE_UPDATE"===e.type&&(o((function(t){return d(d({},t),{},{timeLeft:e.state.timeLeft,isRunning:e.state.isRunning,isBreak:e.state.isBreak,isCompleted:e.state.isCompleted,stats:e.state.stats})})),y(e.state.currentTask),h(e.state.subTasks||[]))};return e.onMessage.addListener(t),e.postMessage({action:"getState"}),function(){try{e.onMessage.removeListener(t),e.disconnect()}catch(e){console.error("Error cleaning up port:",e)}}}catch(e){console.error("Error setting up port connection:",e)}}),[]);var j=function(){console.log("App: handleStartTimer called");var e=s.trim()||p;e?(console.log("Sending startTimer message with task:",e),O.postMessage({action:"startTimer",task:e,focusDuration:t.focusDuration}),y(e),c("")):console.log("No task provided")};return(0,n.useEffect)((function(){console.log("App mounted")}),[]),n.createElement("div",{className:"app-container"},n.createElement("div",{className:"main-content"},n.createElement("header",{className:"app-header"},n.createElement("div",{className:"logo-container"},n.createElement("h1",{className:"app-title"},"Polydomo"),n.createElement("img",{src:"/icons/Evil_Tomato.gif",alt:"Evil Tomato Mascot",className:"mascot-gif"})),n.createElement("div",{className:"header-controls"},n.createElement("button",{className:"settings-btn icon-btn",onClick:function(){return S(!0)},"aria-label":"Settings"},n.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},n.createElement("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z",strokeLinecap:"round",strokeLinejoin:"round"}))))),n.createElement(u,{timeLeft:a.timeLeft,isRunning:a.isRunning,isBreak:a.isBreak,isCompleted:a.isCompleted,stats:a.stats,settings:t})),n.createElement(l,{currentTask:p,taskInput:s,setTaskInput:c,handleStartTimer:j,subTasks:g,onAddSubTask:function(e){O.postMessage({action:"addSubTask",task:e}),h([].concat(m(g),[e]))},isVisible:!a.isRunning||a.isCompleted,isBreak:a.isBreak,isCompleted:a.isCompleted,onPrioritizeSubTask:function(e){y(e),h(g.filter((function(t){return t!==e}))),O.postMessage({action:"switchTask",task:e,previousTask:p})}}))};var k=document.getElementById("root");(0,a.H)(k).render(n.createElement(h,null))},942:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,o(r)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=i(t,r));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,a,o]=e[l],s=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,a,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={887:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,s,c]=r,u=0;if(i.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var l=c(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[967],(()=>n(234)));a=n.O(a)})();
//# sourceMappingURL=popup.js.map